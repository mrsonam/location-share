{"version":3,"file":"static/js/765.cebd2ed7.chunk.js","mappings":"4OAOMA,EAASC,EAAAA,GAAAA,QAAW,yBAiE1B,UA/Da,WACX,IAAMC,GAAaC,EAAAA,EAAAA,KAAY,SAACC,GAAD,OAAWA,EAAMC,KAAKH,cACrD,EAAkCI,EAAAA,SAAe,CAAC,QAAS,SAA3D,eAAOC,EAAP,KAAkBC,EAAlB,KACMC,GAAWN,EAAAA,EAAAA,KAAY,SAACC,GAAD,sBAAWA,QAAX,IAAWA,GAAX,UAAWA,EAAOC,YAAlB,iBAAW,EAAaA,YAAxB,aAAW,EAAmBK,SAAS,GACpE,EAA8BJ,EAAAA,SAAe,IAA7C,eAAOK,EAAP,KAAgBC,EAAhB,KACA,EAAoBN,EAAAA,SAAe,IAAnC,eAAOO,EAAP,KAAWC,EAAX,KACA,EAAoCR,EAAAA,SAAe,IAAnD,eAAOS,EAAP,KAAmBC,EAAnB,KAGA,IAAKd,EACH,OAAO,SAAC,KAAD,CAAUe,GAAG,WActBjB,EAAOkB,GAAG,YAAY,SAACC,GACrBA,EAAKV,WAAaA,EACdD,EAAa,CAACW,EAAKC,SAAUD,EAAKE,YAClCT,EAAW,CAACO,EAAKC,SAAUD,EAAKE,YACpCF,EAAKV,WAAaA,EACdK,EAAMK,EAAKV,UACXO,EAAcG,EAAKV,cAIzBa,EAAAA,EAAAA,YAAU,WACR,IAAMC,EAAWC,aAAY,WArB7BC,UAAUC,YAAYC,oBAAmB,SAACC,GACxC5B,EAAO6B,KAAK,WAAY,CACtBpB,SAAUA,EACVW,SAAUQ,EAASE,OAAOV,SAC1BC,UAAWO,EAASE,OAAOT,YAE7Bb,EAAa,CAACoB,EAASE,OAAOV,SAAUQ,EAASE,OAAOT,iBAiBvD,KACH,OAAO,kBAAMU,cAAcR,MAC1B,IAEa,IAEhB,OACE,UAAC,IAAD,CAAcS,OAAQzB,EAAW0B,KAAM,GAAIC,iBAAiB,EAA5D,WACE,SAAC,IAAD,CACEC,YAAY,wFACZC,IAAI,wDAEN,SAAC,IAAD,CAAQR,SAAUrB,EAAlB,UACE,SAAC,IAAD,UAAQM,MAEM,KAAfE,GACC,yBAEA,SAAC,IAAD,CAAQa,SAAUjB,EAAlB,UACE,SAAC,IAAD,UAAQI","sources":["Pages/Home/Home.jsx"],"sourcesContent":["import React, {useEffect} from 'react';\r\nimport { MapContainer, TileLayer, Marker, Popup } from 'react-leaflet';\r\nimport { useSelector } from 'react-redux';\r\nimport { Navigate } from 'react-router-dom';\r\nimport { io } from 'socket.io-client';\r\nimport { Avatar } from '@mui/material';\r\n\r\nconst socket = io.connect('http://localhost:7000');\r\n\r\nconst Home = () => {\r\n  const isLoggedIn = useSelector((state) => state.user.isLoggedIn);\r\n  const [myLatLong, setMyLatLong] = React.useState([27.7172, 85.324]);\r\n  const username = useSelector((state) => state?.user?.user?.name) || \"\";\r\n  const [latLong, setLatLong] = React.useState([]);\r\n  const [me, setMe] = React.useState('');\r\n  const [otherUsers, setOtherUsers] = React.useState('');\r\n  // const map = useMap();\r\n\r\n  if (!isLoggedIn) {\r\n    return <Navigate to=\"/login\" />;\r\n  }\r\n\r\n  const sendLocation = () => {\r\n    navigator.geolocation.getCurrentPosition((position) => {\r\n      socket.emit('location', {\r\n        username: username,\r\n        latitude: position.coords.latitude,\r\n        longitude: position.coords.longitude,\r\n      });\r\n      setMyLatLong([position.coords.latitude, position.coords.longitude]);\r\n    });\r\n  };\r\n\r\n  socket.on('location', (data) => {\r\n    data.username === username\r\n      ? setMyLatLong([data.latitude, data.longitude])\r\n      : setLatLong([data.latitude, data.longitude]);\r\n    data.username === username\r\n      ? setMe(data.username)\r\n      : setOtherUsers(data.username);\r\n  });\r\n\r\n  // eslint-disable-next-line react-hooks/rules-of-hooks\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      sendLocation();\r\n    }, 1000);\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n  \r\n  const myIcon = <Avatar alt={me} src=\"\" />\r\n\r\n  return (\r\n    <MapContainer center={myLatLong} zoom={13} scrollWheelZoom={true}>\r\n      <TileLayer\r\n        attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n      />\r\n      <Marker position={myLatLong}>\r\n        <Popup>{me}</Popup>\r\n      </Marker>\r\n      {otherUsers === '' ? (\r\n        <></>\r\n      ) : (\r\n        <Marker position={latLong}>\r\n          <Popup>{otherUsers}</Popup>\r\n        </Marker>\r\n      )}\r\n    </MapContainer>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n"],"names":["socket","io","isLoggedIn","useSelector","state","user","React","myLatLong","setMyLatLong","username","name","latLong","setLatLong","me","setMe","otherUsers","setOtherUsers","to","on","data","latitude","longitude","useEffect","interval","setInterval","navigator","geolocation","getCurrentPosition","position","emit","coords","clearInterval","center","zoom","scrollWheelZoom","attribution","url"],"sourceRoot":""}